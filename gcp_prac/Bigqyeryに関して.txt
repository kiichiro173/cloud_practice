Big queryに関して
→Big queryはMap Reduceを代替するために開発されたDremelと呼ばれるデータ処理の仕組みを基にしている。
→ストレージ・コンピュート・メモリは分離されている。
→マルチテナント方式を使用している。つまりどのBigqueryの環境からでもリージョンが同じなら同じストレージを見る仕組み
→サンドボックス環境というのがあり、GCPを無料で使用する事が可能。
→エクスプローラの横の…を押して「データを追加」があるのでそこを使用する。
→そうすることによって一般に公開されているデータを確認する事ができる。
→Big queryはインデックスを持たない。


・データセットのデータをコピーしたい場合は、コンソール画面で行う事ができる。
→コンソール画面のところのデータセットを選択する事で可能

・GCSのバケットにあるCSVからBigqueryのデータセットを作成する。
→リージョンを合わせる必要がある。
→スキーマは自分で設定するか、自動的に検出するかの二択


課金に関して
→これはクエリでスキャンした容量に対して課金される。
→テーブルの中身を少し確認してみたい場合は、テーブルのプレビュー画面を使用すると良い。

UDFに関して
→UDFは一時的なものと、永続的なものが存在する。
→https://teku2tech.net/sql/udf/

以下のように関数を作成する際にTEMPを記載すると一時的な関数になる。
CREATE TEMP FUNCTION `target_string`(td string) AS (
    case
        when td = 'Phone' then 'this is Phone'
        else 'this is UDF check'
    end
);

また永続的なものを作成する場合はTEMPをなくす
CREATE OR REPLACE FUNCTION  `プロジェクト名.データセット名.関数名`(td string) AS (
    case
        when td = 'Phone' then 'this is Phone'
        else 'this is UDF check'
    end
);

実際にUDFで作成した関数を使用するには以下
SELECT `winged-fact-274808.third_dataset.service`(source)
 FROM `winged-fact-274808.third_dataset.service`;

・Bigqueryスキャンしたデータの数だけ課金される。
→よってselect *のようにするのではなく、列を指定すると良い。（列指向のカラムであるから。）
→もしくはパーティション分割をすると良い。
→データを作成時にパーティショニングを作成する事ができる。→パーティショニングすることによってスキャンされるデータ量が削減されたのを確認する事が出来た。
→またBigqueryで取得したデータから一時テーブルとして保存され、そのクエリ結果を取得することもできる。